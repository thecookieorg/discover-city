<script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script> 
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<div class="container">
  <div class="row">
    <div class="col-md-12">
        <div id="map" style='width: 100%; height: 500px;'></div>
    </div>
  </div><!-- end row -->
  <div class="row" style="margin-top: 50px;">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Local Restaurants</h3>
      </div>
      <div class="panel-body">
         <% @restaurants.each do |restaurant| %>
          <h3>
              <%= image_tag restaurant.logo.thumb.url %> <%= restaurant.name %> | <%= link_to "tel:#{restaurant.phone_number}" do %>
              <i class="fa fa-phone"></i> <%= restaurant.phone_number %> 
            <% end %> | <a href="#" data-toggle="modal" data-target="#myModal" style="padding: 0px"> <i class="fa fa-clock-o"></i> Hours </a> | <%= restaurant.address %> | <%= link_to 'Details', restaurant, class: "btn btn-success" %>
          </h3>
          
          <div class="row">
            <div class="col-sm-2">
              <!-- Button trigger modal -->
              <div class="modal fade" id="myModal">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title">Working Hours</h4>
                    </div>
                    <div class="modal-body">
                      <div class="row">
                        <div class="col-md-12">
                          <p><strong>Monday:</strong> <%= restaurant.monday_hours %></p>
                          <p><strong>Tuesday:</strong> <%= restaurant.tuesday_hours %></p>
                          <p><strong>Wednesday:</strong> <%= restaurant.wednesday_hours %></p>
                          <p><strong>Thursday:</strong> <%= restaurant.thursday_hours %></p>
                          <p><strong>Friday:</strong> <%= restaurant.friday_hours %></p>
                          <p><strong>Saturday:</strong> <%= restaurant.saturday_hours %></p>
                          <p><strong>Sunday:</strong> <%= restaurant.sunday_hours %></p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- end col-md-3 -->
            
        <% end %>
      </div><!-- end panel-body -->
    </div><!-- end panel panel-warning-->
  </div><!-- end row -->
</div><!-- end container -->

<script>
handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
</script>