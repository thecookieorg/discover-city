<script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script> 
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<div class="container">
  <div class="row">
    <div class="col-md-12">
        <div id="map" style='width: 100%; height: 500px;'></div>
    </div>
  </div><!-- end row -->
  <div class="row" style="margin-top: 50px;">
    <div class="panel panel-warning">
      <div class="panel-heading">
        <h3 class="panel-title">Local Restaurants</h3>
      </div>
      <div class="panel-body">
         <% @restaurants.each do |restaurant| %>
          <h3><%= restaurant.name %> | <%= link_to "tel:#{restaurant.phone_number}" do %>
              <i class="fa fa-phone"></i> <%= restaurant.phone_number %>
            <% end %>
          </h3>
          
          <div class="row">
            <div class="col-sm-3">
              <p>
                <%= restaurant.address %>
              </p>    
            </div>
            <div class="col-sm-3">
              <p>
                <%= link_to "http://#{restaurant.website}", target: "_blank" do %>
                  <i class="fa fa-globe"></i> Website
                <% end %>
              </p>
            </div>
            <div class="col-sm-3">
              <!-- Button trigger modal -->
              <p class="btn btn-link" data-toggle="modal" data-target="#myModal" style="padding: 0px">
                <i class="fa fa-clock-o"></i> Hours
              </p>
              <div class="modal" id="myModal">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title">Working Hours</h4>
                    </div>
                    <div class="modal-body">
                      <div class="row">
                        <div class="col-md-12">
                          <p><strong>Monday:</strong> <%= restaurant.monday_hours %></p>
                          <p><strong>Tuesday:</strong> <%= restaurant.tuesday_hours %></p>
                          <p><strong>Wednesday:</strong> <%= restaurant.wednesday_hours %></p>
                          <p><strong>Thursday:</strong> <%= restaurant.thursday_hours %></p>
                          <p><strong>Friday:</strong> <%= restaurant.friday_hours %></p>
                          <p><strong>Saturday:</strong> <%= restaurant.saturday_hours %></p>
                          <p><strong>Sunday:</strong> <%= restaurant.sunday_hours %></p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          
            <td><%= restaurant.order_online %></td>
            
            <td><%= restaurant.facebook %></td>
            <td><%= restaurant.twitter %></td>
            <td><%= restaurant.instagram %></td>
            <td><%= link_to 'Show', restaurant %></td>
            <td><%= link_to 'Edit', edit_restaurant_path(restaurant) %></td>
            <td><%= link_to 'Destroy', restaurant, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          
        <% end %>
      </div>
    </div>
  </div>
</div><!-- end container -->




<%= link_to 'New Restaurant', new_restaurant_path %>

<script>
handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
</script>